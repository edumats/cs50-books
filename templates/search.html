{% extends "layout.html" %}

{% block title %}
    Home
{% endblock %}

{% block main %}

    <div id="search-results">
        {% for result in results %}
            <div class="result-item">
                <a id="title-link" href="{{ url_for('book', isbn=result.isbn) }}">
                    <h4>{{ result.title }}</h4>
                </a>
                <a class="img-link" href="{{ url_for('book', isbn=result.isbn) }}">
                    <img src="http://covers.openlibrary.org/b/isbn/{{ result.isbn }}-M.jpg" alt="{{ result.title }}">
                </a>
                <p>By {{ result.author }}</p>
            </div>
        {% endfor %}
    </div>




    <script>
    /*
        document.addEventListener('DOMContentLoaded', () => {
            let input = document.querySelector('input');
            input.onkeyup = () => {
                if (input.value.length > 1)
                    $.get('/autocomplete?q=' + input.value, data => {
                        for (x in data) {
                            document.querySelector('#books').innerHTML = "";
                            const option = document.createElement('option');
                            option.innerHTML = data[x].title + ": " + data[x].author;
                            document.querySelector('#books').appendChild(option);
                        }
                    });
            };
        })


        $('#q').autocomplete({
            serviceUrl: '{{url_for("search")}}',
            source: data,
            dataType: 'json',
            minlenght: 2,
        });
    */
    </script>

{% endblock %}
